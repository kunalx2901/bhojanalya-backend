datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "go run github.com/steebchen/prisma-client-go"
}

model User {
  id          Int          @id @default(autoincrement())
  name        String
  email       String       @unique
  password    String
  role        String       @default("AGENT") // AGENT or ADMIN
  restaurants Restaurant[]
}

model Restaurant {
  id          Int      @id @default(autoincrement())
  name        String
  address     String
  status      String   @default("DRAFT") // DRAFT, PENDING_REVIEW, APPROVED
  owner       User     @relation(fields: [ownerId], references: [id])
  ownerId     Int
  
  // Team 3 Requirements (Excluding Tables)
  menuItems   MenuItem[]
  checklist   OnboardingChecklist?
  createdAt   DateTime @default(now())
}

model MenuItem {
  id           Int        @id @default(autoincrement())
  name         String
  price        Float
  category     String
  restaurant   Restaurant @relation(fields: [restaurantId], references: [id])
  restaurantId Int
}

model OnboardingChecklist {
  id                Int        @id @default(autoincrement())
  restaurant        Restaurant @relation(fields: [restaurantId], references: [id])
  restaurantId      Int        @unique
  menuConfigured    Boolean    @default(false)
  complianceChecked Boolean    @default(false)
}